import{o as e,c as t,w as i,j as s,a,m as l,e as r,t as d,l as o,k as n,v as c,i as u,p as h,V as g,f,h as _,b as p,r as m,F as b,n as y}from"./index-Ds1uBd_9.js";import{_ as k,w as x}from"./index.CiApdTwd.js";import{r as w}from"./uni-app.es.C8rTvpW-.js";import{_ as C}from"./uni-section.BY6HD_hr.js";const v=k({name:"UniCard",emits:["click"],props:{title:{type:String,default:""},subTitle:{type:String,default:""},padding:{type:String,default:"10px"},margin:{type:String,default:"15px"},spacing:{type:String,default:"0 10px"},extra:{type:String,default:""},cover:{type:String,default:""},thumbnail:{type:String,default:""},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!0},shadow:{type:String,default:"0px 0px 3px 1px rgba(0, 0, 0, 0.08)"},border:{type:Boolean,default:!0}},methods:{onClick(e){this.$emit("click",e)}}},[["render",function(g,f,_,p,m,b){const y=c,k=u,x=h;return e(),t(k,{class:n(["uni-card",{"uni-card--full":_.isFull,"uni-card--shadow":_.isShadow,"uni-card--border":_.border}]),style:o({margin:_.isFull?0:_.margin,padding:_.spacing,"box-shadow":_.isShadow?_.shadow:""})},{default:i((()=>[s(g.$slots,"cover",{},(()=>[_.cover?(e(),t(k,{key:0,class:"uni-card__cover"},{default:i((()=>[a(y,{class:"uni-card__cover-image",mode:"widthFix",onClick:f[0]||(f[0]=e=>b.onClick("cover")),src:_.cover},null,8,["src"])])),_:1})):l("",!0)]),!0),s(g.$slots,"title",{},(()=>[_.title||_.extra?(e(),t(k,{key:0,class:"uni-card__header"},{default:i((()=>[a(k,{class:"uni-card__header-box",onClick:f[1]||(f[1]=e=>b.onClick("title"))},{default:i((()=>[_.thumbnail?(e(),t(k,{key:0,class:"uni-card__header-avatar"},{default:i((()=>[a(y,{class:"uni-card__header-avatar-image",src:_.thumbnail,mode:"aspectFit"},null,8,["src"])])),_:1})):l("",!0),a(k,{class:"uni-card__header-content"},{default:i((()=>[a(x,{class:"uni-card__header-content-title uni-ellipsis"},{default:i((()=>[r(d(_.title),1)])),_:1}),_.title&&_.subTitle?(e(),t(x,{key:0,class:"uni-card__header-content-subtitle uni-ellipsis"},{default:i((()=>[r(d(_.subTitle),1)])),_:1})):l("",!0)])),_:1})])),_:1}),a(k,{class:"uni-card__header-extra",onClick:f[2]||(f[2]=e=>b.onClick("extra"))},{default:i((()=>[a(x,{class:"uni-card__header-extra-text"},{default:i((()=>[r(d(_.extra),1)])),_:1})])),_:1})])),_:1})):l("",!0)]),!0),a(k,{class:"uni-card__content",style:o({padding:_.padding}),onClick:f[3]||(f[3]=e=>b.onClick("content"))},{default:i((()=>[s(g.$slots,"default",{},void 0,!0)])),_:3},8,["style"]),a(k,{class:"uni-card__actions",onClick:f[4]||(f[4]=e=>b.onClick("actions"))},{default:i((()=>[s(g.$slots,"actions",{},void 0,!0)])),_:3})])),_:3},8,["class","style"])}],["__scopeId","data-v-b4135a35"]]);const S=k({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((e,t)=>{e===this&&this.grid.children.splice(t,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(r,d,c,h,g,f){const _=u;return g.width?(e(),t(_,{key:0,style:o("width:"+g.width+";"+(g.square?"height:"+g.width:"")),class:"uni-grid-item"},{default:i((()=>[a(_,{class:n([{"uni-grid-item--border":g.showBorder,"uni-grid-item--border-top":g.showBorder&&c.index<g.column,"uni-highlight":g.highlight},"uni-grid-item__box"]),style:o({"border-right-color":g.borderColor,"border-bottom-color":g.borderColor,"border-top-color":g.borderColor}),onClick:f._onClick},{default:i((()=>[s(r.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onClick"])])),_:3},8,["style"])):l("",!0)}],["__scopeId","data-v-0810a0ad"]]);const B=k({name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((e=>{this.children.forEach(((t,i)=>{t.width=e}))}))}),50)},change(e){this.$emit("change",e)},_getSize(e){g().in(this).select(`#${this.elId}`).boundingClientRect().exec((t=>{this.width=parseInt((t[0].width-1)/this.column)+"px",e(this.width)}))}}},[["render",function(l,r,d,c,h,g){const f=u;return e(),t(f,{class:"uni-grid-wrap"},{default:i((()=>[a(f,{id:h.elId,ref:"uni-grid",class:n(["uni-grid",{"uni-grid--border":d.showBorder}]),style:o({"border-left-color":d.borderColor})},{default:i((()=>[s(l.$slots,"default",{},void 0,!0)])),_:3},8,["id","class","style"])])),_:3})}],["__scopeId","data-v-257e8068"]]),I=k({__name:"rank",setup(s){const l=f([]),o=f([]),n=e=>{y({url:`/pages/index/banner/rankingPlaylist/rankingPlaylist?id=${encodeURIComponent(e)}`,success:function(){console.log("跳转成功")},fail:function(e){console.error("跳转失败",e)}})};return(async()=>{const e=await x();console.log(e),l.value=e.list.slice(0,4),o.value=e.list.slice(4)})(),(s,g)=>{const f=h,y=u,k=w(_("uni-card"),v),x=w(_("uni-section"),C),I=c,$=w(_("uni-grid-item"),S),F=w(_("uni-grid"),B);return e(),t(y,{class:"box"},{default:i((()=>[a(y,{class:"official"},{default:i((()=>[a(y,{class:"official-list"},{default:i((()=>[a(x,{title:"官方榜",type:"line",class:"custom-section"},{default:i((()=>[(e(!0),p(b,null,m(l.value,(s=>(e(),t(k,{key:s.id,title:s.name,"sub-title":s.playCount,extra:s.updateFrequency,thumbnail:s.coverImgUrl,onClick:e=>n(s.id)},{default:i((()=>[a(y,{class:"uni-body"},{default:i((()=>[(e(!0),p(b,null,m(s.tracks,((s,l)=>(e(),t(y,{class:"item-song",key:s.first},{default:i((()=>[a(f,{class:"songs-title"},{default:i((()=>[r(d(l+1)+"."+d(s.first),1)])),_:2},1024),r(" - "+d(s.second),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["title","sub-title","extra","thumbnail","onClick"])))),128))])),_:1})])),_:1})])),_:1}),a(y,{class:"other"},{default:i((()=>[a(x,{title:"其他榜单",type:"line",padding:""},{default:i((()=>[a(F,{class:"uni-grids",column:3,"show-border":!1,square:!1,onChange:s.change},{default:i((()=>[(e(!0),p(b,null,m(o.value,((s,l)=>(e(),t($,{index:l,key:s.id,onClick:e=>n(s.id)},{default:i((()=>[a(y,{class:"grid-item-box"},{default:i((()=>[a(I,{class:"image",src:s.coverImgUrl,mode:"widthFix"},null,8,["src"])])),_:2},1024)])),_:2},1032,["index","onClick"])))),128))])),_:1},8,["onChange"])])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-5fd2d0ba"]]);export{I as default};
